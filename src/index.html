<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skype Export Viewer</title>
    <link rel="icon" type="image/x-icon" href="./favicon.ico">
    
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="./css/collapsible.css">
    <link rel="stylesheet" href="./css/tabs/messages.css">
    <link rel="stylesheet" href="./css/tabs/messages-popup.css">
    <link rel="stylesheet" href="./css/tabs/media.css">
    <link rel="stylesheet" href="./css/tabs/endpoints.css">
    <link rel="stylesheet" href="./css/tabs/contacts.css">
    <link rel="stylesheet" href="./css/tabs/numbers.css">

    <!-- Include the ProgressDrop-JS library from this github through CDN -->
    <script src="https://cdn.jsdelivr.net/gh/sbamboo/progressdrop_js/dist/a0.0.5/progressdrop.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sbamboo/progressdrop_js/dist/a0.0.5/progressdrop.min.css">

    <!-- Include the JSZip library from CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>

    <!-- Include the TarballJS library from this github through CDN -->
    <script src="https://cdn.jsdelivr.net/gh/sbamboo/progressdrop_js/dist/tarballjs/tarball.min.js"></script>

    <!-- Include the VanillaES/CSV library from github through CDN -->
    <script type="module">
        import { parse } from 'https://cdn.jsdelivr.net/gh/vanillaes/csv/index.min.js';
        window.CSV = { parse };
    </script>
</head>
<body>
    <div class="container">
        <header>
            <img src="./skype.svg" alt="Skype Logo" class="skype-logo" id="skypeLogo-1">
            <img src="./skype_old.svg" alt="Skype Logo" class="skype-logo" id="skypeLogo-2" style="display:none;">
            <h1>Skype Export Viewer</h1>
        </header>

        <noscript>
            <style>
                .container > *:not(header):not(noscript) {
                    display: none;
                }
                .noscript-message {
                    display: block;
                    font-size: 1.2em;
                    margin-top: 20px;
                }
            </style>
            <div class="noscript-message">
                For full functionality of this site it is necessary to enable JavaScript.<br>
                Here are the <a href="https://www.enable-javascript.com/">instructions for how to enable JavaScript in your web browser</a>.
            </div>
        </noscript>

        <div id="progressContainer"></div>

        <div class="upload-section">
            <div class="upload-left">
                <button id="uploadBtn">Upload a skype export archive</button>
                <input type="file" id="fileInput" accept=".tar" style="display: none;">
            </div>
            <div class="separator"></div>
            <div class="upload-right">
                <button id="fetchBtn">Fetch a skype export archive</button>
                <input type="text" id="urlInput" placeholder="Enter URL to .tar file">
            </div>
        </div>

        <p class="info-text">Your data is never uploaded to a server and exists only in your web browser until the page is reloaded or closed.</p>

        <hr>

        <div class="upload-section additional-upload-section">
            <div class="upload-left">
                <button id="contactsUploadBtn">Upload a skype contacts.csv</button>
                <input type="file" id="contactsFileInput" accept=".csv" style="display: none;">
            </div>
            <div class="separator"></div>
            <div class="upload-right">
                <button id="numbersUploadBtn">Fetch a skype numbers.csv</button>
                <input type="file" id="numbersFileInput" accept=".csv" style="display: none;">
            </div>
        </div>

        <div id="viewerWrapper" style="display:none;">
            <hr>

            <div class="viewer">
                <div class="tabs" id="tabsContainer">
                    <!-- Tabs will be dynamically added here -->
                </div>
                <div class="tab-contents" id="tabContentsContainer">
                    <!-- Tab content will be dynamically loaded here -->
                </div>
            </div>

        </div>
    </div>

    <script src="./js/emoticons/mappings.js"></script>
    <script src="./js/emoticons/parsers.js"></script>

    <script src="./js/tabs/messages/jsonarray_appcard.js"></script>
    <script src="./js/tabs/messages/jsonarray_engagement.js"></script>
    <script src="./js/tabs/messages_parsing.js"></script>
    <script src="./js/tabs/messages.js"></script>
    <script src="./js/tabs/media.js"></script>
    <script src="./js/tabs/endpoints.js"></script>
    <script src="./js/tabs/contacts.js"></script>
    <script src="./js/tabs/numbers.js"></script>
    <script src="./js/main.js"></script>
</body>
</html>